{% extends "wiki/base.html" %}
{% load wiki_tags i18n sekizai_tags %}
{% load category_tags %}

{% block wiki_pagetitle %}{{ article.current_revision.title }}{% endblock %}

{% block wiki_breadcrumbs %}
{% include "wiki/includes/breadcrumbs.html" %}
{% endblock %}

{% block wiki_contents %}

  <div id="article-container">
    <ul class="nav nav-pills" id="article-menu">
      <li class="pull-left" id="article-title-li">
        <h1 id="article-title">
          {% block wiki_articletitle %}
            {{ article.current_revision.title }}
          {% endblock %}
          <small style="font-size: 14px;">
            {% if urlpath.parent %}
            <a href="{% url 'wiki:get' path=urlpath.path %}"><span class="fa fa-bookmark"></span> {{ urlpath.slug }}</a>
            {% endif %}
            {% if article.current_revision.locked %}
              <span class="fa fa-lock"></span> {% trans "locked" %}
            {% endif %}
          </small>
        </h1>
      </li>
      {% include "wiki/includes/article_menu.html" %}
    </ul>
    <div>
      {% block wiki_contents_tab %}
      {% endblock %}
    </div>

  </div>

{% endblock %}

{% block wiki_footer_prepend %}
  <p style="margin-bottom: 10px;"><em>{% trans "This article was last modified:" %} {{ article.current_revision.modified }} ET</em></p>

{% addtoblock "js" %}
<script type="text/javascript">
	$(function () {
		// insert handle hyperlink for each article heading, and truncate the heading ID to 50 chars
		// move the ID to the link so as not to mess with the CSS :target hack for navbar (some headings have custom margins)
		$('h1,h2,h3,h4,h5,h6').each(function (i) {
			var x = $(this).attr("id");
			if (x.startsWith("wiki-toc-")) {
				x = x.slice(0, 50);
				$(this).attr("id", "");
				$(this).prepend('<a id="' + x + '" href="#' + x + '" class="handle">#</a>');
			}
		});
	});
</script>
{% endaddtoblock %}
{% endblock %}
